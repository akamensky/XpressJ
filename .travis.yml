language: java
jdk:
  - oraclejdk8

env:
  global:
    - SONATYPE_USERNAME=akamensky
    - secure: "CJFWmQjl6MEc77E41jy4Yma1TXQyqk3zhJ5Vbq26lxiYWSBca88eBgjQklnnbYoLuo/6z7h/HwRqwn3PHvRBKsmjjLtNSsib0X8jPl0g1T33zxJLlSVWt+2S4CU0l3RHbQ4qnnxEeHrza0jztzQBI3k3IUx3hnYXHXTTGQu7BL4="
    - secure: "YgWal9twndi+iZQYv59kCADj5DdNBx36pSuelXy1C1RSuC/hkyELkfJ1qOvEDSAa+VwHTg1a7kMgdWphJDuVZ++R3fY8fZDnigup1m6aEYFfwIZ6hWkrcEcknMG72TfLgJ7Lgj2vU+cr/Px+5L/lFqlIpoLOPzf2hJpD4zDU+Io="

after_success:
  - COMMIT_HASH=$(git rev-parse --short HEAD); CURR_COMMIT_TAG=$(git describe --exact-match $COMMIT_HASH); if [[ $CURR_COMMIT_TAG != "" && $TRAVIS_TAG == $CURR_COMMIT_TAG ]]; then openssl enc -aes-256-cbc -d -in .secret.key -out secret.gpg -k $GPG_DECRYPTION_KEY; gpg --import secret.gpg; mvn clean deploy -Dmaven.test.skip=true --settings mvnsettings.xml; else echo "NO TAG FOUND HENCE NOT DEPLOYING"; fi